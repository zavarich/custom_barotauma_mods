<?xml version="1.0" encoding="utf-8"?>
<Override>
  <Items>
    <Item name="" HideConditionBar="true" identifier="grenadelauncher" category="Weapon" cargocontaineridentifier="metalcrate" tags="mediumitem,weapon,gun,gunsmith,provocativetohumanai,mountableweapon" Scale="0.5" impactsoundtag="impact_metal_light">
      <PreferredContainer primary="secarmcab" amount="1" spawnprobability="0.2" notcampaign="true" notpvp="true" />
      <PreferredContainer secondary="wrecksecarmcab,abandonedsecarmcab,piratesecarmcab" spawnprobability="0.1" />
      <PreferredContainer secondary="armcab" />
      <Price baseprice="1000" sold="false" minleveldifficulty="30">
        <Price storeidentifier="merchantoutpost" multiplier="1.5" />
        <Price storeidentifier="merchantcity" multiplier="1.25" />
        <Price storeidentifier="merchantresearch" multiplier="1.25" />
        <Price storeidentifier="merchantmilitary" sold="true" multiplier="0.9" minavailable="1" />
        <Price storeidentifier="merchantmine" multiplier="1.25" />
        <Price storeidentifier="merchantarmory" sold="true" multiplier="0.9" minavailable="1" />
      </Price>
      <Deconstruct time="10">
        <Item identifier="steel" />
        <Item identifier="titaniumaluminiumalloy" />
      </Deconstruct>
      <InventoryIcon texture="%ModDir%/GrenadeLauncher/GrenadeLauncher.png" sourcerect="163,0,64,64" origin="0.5,0.5" />
      <Sprite texture="%ModDir%/GrenadeLauncher/GrenadeLauncher.png" sourcerect="0,0,163,49" depth="0.55" origin="0.37,0.54" />
      <BrokenSprite texture="%ModDir%/GrenadeLauncher/GrenadeLauncher.png" sourcerect="0,49,163,49" depth="0.55" origin="0.37,0.54" maxcondition="66" />
      <BrokenSprite texture="%ModDir%/GrenadeLauncher/GrenadeLauncher.png" sourcerect="0,98,163,49" depth="0.55" origin="0.37,0.54" maxcondition="33" />
      <BrokenSprite texture="%ModDir%/GrenadeLauncher/GrenadeLauncher.png" sourcerect="0,0,163,49" depth="0.55" origin="0.37,0.54" maxcondition="0" />
      <Body width="170" height="40" density="25" />
      <Holdable slots="RightHand+LeftHand" controlpose="true" holdpos="30,-30" aimpos="35,-7" handle1="-30,-10" handle2="50,-5" holdangle="-25" />
      <Wearable slots="Bag" msg="ItemMsgEquipSelect" canbeselected="false" canbepicked="true" pickkey="Select">
        <sprite name="Grenade Launcher Worn" texture="%ModDir%/GrenadeLauncher/GrenadeLauncher.png" canbehiddenbyotherwearables="false" sourcerect="0,0,163,49" rotation="-90" depth="0.6" limb="Torso" depthlimb="LeftArm" scale="0.5" origin="0.5,-0.4" />
      </Wearable>
      <RangedWeapon barrelpos="90,11" reload="0.8" spread="1" unskilledspread="10" combatPriority="75" drawhudwhenequipped="true" crosshairscale="0.2">
        <!-- Crosshairs. -->
        <Crosshair texture="%ModDir%/Crosshairs.png" sourcerect="256,512,256,256" />
        <CrosshairPointer texture="%ModDir%/Crosshairs.png" sourcerect="0,512,256,256" />
        <!-- Particles. -->
        <!-- Visible only on air. -->
        <ParticleEmitter particle="largemuzzleflash" particleamount="1" />
        <ParticleEmitter particle="muzzlelight" particleamount="1" scalemultiplier="6,4" colormultiplier="255,255,100,175" CopyEntityAngle="true" />
        <ParticleEmitter particle="muzzlelight" particleamount="1" scalemultiplier="16,12" colormultiplier="215,215,215,100" CopyEntityAngle="true" />
        <ParticleEmitter particle="largegunsmoke" particleamount="1" />
        <!-- Visible only inside water. -->
        <ParticleEmitter particle="underwatermuzzle" particleamount="1" velocitymin="0" velocitymax="0" scalemultiplier="2.5,2.5" />
        <ParticleEmitter particle="muzzlebubbles" particleamount="6" anglemin="30" anglemax="80" velocitymin="20" velocitymax="50" />
        <ParticleEmitter particle="gunbubbles" particleamount="12" anglemin="170" anglemax="180" velocitymin="10" velocitymax="20" distancemin="0" distancemax="90" />
        <!-- Fire sounds. -->
        <Sound file="Content/Items/Weapons/GrenadeLauncherShot1.ogg" type="OnUse" range="1000" />
        <Sound file="Content/Items/Weapons/GrenadeLauncherShot2.ogg" type="OnUse" range="1000" />
        <Sound file="Content/Items/Weapons/GrenadeLauncherShot3.ogg" type="OnUse" range="1000" />
        <!-- On fire, sets the light component's transparency to 255 and then back to 0.
      Why? Simply turning the light on and off is too slow. -->
        <StatusEffect type="OnUse" targetitemcomponent="LightComponent" target="This" lightcolor="255,255,75,255" setvalue="true" />
        <StatusEffect type="OnUse" targetitemcomponent="LightComponent" target="This" lightcolor="255,255,75,0" setvalue="true" delay="0.115" />
        <!-- Unskilled high recoil. -->
        <StatusEffect type="OnUse" target="This" offset="0,-5">
          <Conditional targetcontainer="true" skillrequirement="true" weapons="lt 60" />
          <Explosion range="75.0" force="3" shockwave="false" smoke="false" flames="false" sparks="false" underwaterbubble="false" flash="false" applyfireeffects="false" camerashake="12.0" />
        </StatusEffect>
        <!-- Skilled low recoil. -->
        <StatusEffect type="OnUse" target="This" offset="0,-5">
          <Conditional targetcontainer="true" skillrequirement="true" weapons="gte 60" />
          <Explosion range="150.0" force="2" shockwave="false" smoke="false" flames="false" sparks="false" underwaterbubble="false" flash="false" applyfireeffects="false" camerashake="6.0" />
        </StatusEffect>
        <!-- Sound. -->
        <StatusEffect type="OnUse" target="This" delay="0.2" forceplaysounds="true">
          <Sound file="%ModDir%/GrenadeLauncher/GrenadeLauncherCylinderRotate.ogg" range="1000" />
        </StatusEffect>
        <!-- First animation frame. -->
        <StatusEffect type="OnUse" target="This" delay="0.4" condition="66" setvalue="true" />
        <!-- Second animation frame. -->
        <StatusEffect type="OnUse" target="This" delay="0.8" condition="100" setvalue="true" />
        <!-- OnBroken (when condition is set to 0 from OnInserted status effects in Containable intended for reloading animation),
      Proxy item's condition will be set to 0 and back to 100 after a delay. -->
        <StatusEffect type="OnBroken" target="Contained" targetidentifiers="grenreloading" delay="0.01" condition="0" setvalue="true" />
        <StatusEffect type="OnBroken" target="Contained" targetidentifiers="grenreloading" delay="4" condition="100" setvalue="true" />
        <!-- Fail safe if the players save and quit during the reloading or shooting. Sets the gun's values to default. -->
        <StatusEffect Type="Always" OneShot="True" target="Contained" targetidentifiers="grenereloading" condition="100" setvalue="true" />
        <StatusEffect Type="Always" OneShot="True" target="This" holdpos="30,-30" aimpos="35,-7" handle1="-30,-10" handle2="50,-5" holdangle="-25" aimangle="0" condition="100" setvalue="true" />
        <StatusEffect type="Always" OneShot="True" targetitemcomponent="LightComponent" target="This" lightcolor="255,255,75,0" setvalue="true" />
        <StatusEffect type="Always" OneShot="True" targetitemcomponent="ItemContainer" target="This" AllowAccess="true" setvalue="true" />
        <!-- Gun requires ammo to use. -->
        <RequiredItems items="grenade" type="Contained" msg="ItemMsgAmmoRequired" />
        <!-- Gun requires proxy item to use. During the reloading, the proxy item's condition is set to 0, preventing the item from firing. -->
        <RequiredItems items="grenreloading" type="Contained" />
        <RequiredSkill identifier="weapons" level="60" />
      </RangedWeapon>
      <!-- Gun's muzzle which works like a light component. -->
      <LightComponent range="42.0" lightcolor="255,255,75,0" IsOn="true">
        <LightTexture texture="%ModDir%/GrenadeLauncher/GrenadeLauncherMuzzle.png" origin="0.37,0.49" size="1.0,1.0" />
      </LightComponent>
      <!--Holds six grenades at a time-->
      <ItemContainer capacity="6" maxstacksize="1" hideitems="false" ShowTotalStackCapacityInContainedStateIndicator="true" containedstateindicatorstyle="bullet" containedspritedepth="0.56">
        <Containable items="grenade" hide="true">
          <!-- Hides the slots, preventing the person from adding more or removing. -->
          <StatusEffect type="OnInserted" target="This" AllowAccess="false" delay="0.01" setvalue="true">
            <Conditional targetcontainer="true" isplayer="true" />
          </StatusEffect>
          <!-- Unhides the slots, allowing the person from adding more or removing. -->
          <StatusEffect type="OnInserted" target="This" AllowAccess="true" delay="4" setvalue="true">
            <Conditional targetcontainer="true" isplayer="true" />
          </StatusEffect>
          <!-- Reloading animation, with status effects setting the conditions to trigger brokensprites, changing aimposes and aimangles and such. -->
          <!-- Pull down the launcher. -->
          <StatusEffect type="OnInserted" target="This" holdangle="-40" aimangle="-40" holdpos="35,-15" aimpos="30,-25" condition="0" setvalue="true" delay="0.01" allowwhenbroken="true">
            <Conditional targetcontainer="true" isplayer="true" />
          </StatusEffect>
          <!-- Set the hand to open the cylinder. -->
          <StatusEffect type="OnInserted" target="This" handle2="15,10" setvalue="true" delay="0.5" allowwhenbroken="true">
            <Conditional targetcontainer="true" isplayer="true" />
          </StatusEffect>
          <!-- Sound. -->
          <StatusEffect type="OnInserted" target="This" delay="0.9" allowwhenbroken="true" forceplaysounds="true">
            <Conditional targetcontainer="true" isplayer="true" />
            <Sound file="%ModDir%/GrenadeLauncher/GrenadeLauncherCylinderOpen.ogg" range="1000" />
          </StatusEffect>
          <!-- Hand opens the cylinder. -->
          <StatusEffect type="OnInserted" target="This" handle2="15,-10" setvalue="true" delay="1" allowwhenbroken="true">
            <Conditional targetcontainer="true" isplayer="true" />
            <ParticleEmitter particle="gunbubbles" particleamount="5" anglemin="180" anglemax="200" velocitymin="10" velocitymax="20" distancemin="-30" distancemax="30" />
          </StatusEffect>
          <!-- Animation frame. -->
          <StatusEffect type="OnInserted" target="This" condition="33" setvalue="true" delay="1.1" allowwhenbroken="true">
            <Conditional targetcontainer="true" isplayer="true" />
          </StatusEffect>
          <!-- Pull the hand back. -->
          <StatusEffect type="OnInserted" target="This" handle2="50,-5" setvalue="true" delay="1.4" allowwhenbroken="true">
            <Conditional targetcontainer="true" isplayer="true" />
          </StatusEffect>
          <!-- Pull up the launcher and set the hand to insert the grenades. -->
          <StatusEffect type="OnInserted" target="This" handle1="0,-5" holdangle="-50" aimangle="-50" holdpos="35,5" aimpos="30,-20" setvalue="true" delay="1.9" allowwhenbroken="true">
            <Conditional targetcontainer="true" isplayer="true" />
          </StatusEffect>
          <!-- Sound. -->
          <StatusEffect type="OnInserted" target="This" delay="2" allowwhenbroken="true" forceplaysounds="true">
            <Conditional targetcontainer="true" isplayer="true" />
            <Sound file="%ModDir%/GrenadeLauncher/GrenadeLauncherGrenadeIn.ogg" range="1000" />
            <ParticleEmitter particle="gunbubbles" particleamount="2" anglemin="180" anglemax="200" velocitymin="10" velocitymax="20" distancemin="-5" distancemax="5" />
          </StatusEffect>
          <!-- Pull down the launcher. -->
          <StatusEffect type="OnInserted" target="This" holdangle="-40" aimangle="-40" holdpos="35,-15" aimpos="30,-25" setvalue="true" delay="2.5" allowwhenbroken="true">
            <Conditional targetcontainer="true" isplayer="true" />
          </StatusEffect>
          <!-- Set hand's position to close the cylinder. -->
          <StatusEffect type="OnInserted" target="This" handle1="15,-10" setvalue="true" delay="2.7" allowwhenbroken="true">
            <Conditional targetcontainer="true" isplayer="true" />
          </StatusEffect>
          <!-- Sound. -->
          <StatusEffect type="OnInserted" target="This" handle1="15,0" setvalue="true" delay="3.2" allowwhenbroken="true" forceplaysounds="true">
            <Conditional targetcontainer="true" isplayer="true" />
            <Sound file="%ModDir%/GrenadeLauncher/GrenadeLauncherCylinderClose.ogg" range="1000" />
          </StatusEffect>
          <!-- Close the cylinder. -->
          <StatusEffect type="OnInserted" target="This" condition="100" setvalue="true" delay="3.3" allowwhenbroken="true">
            <Conditional targetcontainer="true" isplayer="true" />
            <ParticleEmitter particle="gunbubbles" particleamount="3" anglemin="180" anglemax="200" velocitymin="10" velocitymax="20" distancemin="-30" distancemax="30" />
          </StatusEffect>
          <!-- Set everything to default. -->
          <StatusEffect type="OnInserted" target="This" holdpos="30,-30" aimpos="35,-7" handle1="-30,-10" handle2="50,-5" holdangle="-25" aimangle="0" setvalue="true" delay="3.7" allowwhenbroken="true">
            <Conditional targetcontainer="true" isplayer="true" />
          </StatusEffect>
        </Containable>
        <SlotIcon slotindex="0" texture="Content/UI/StatusMonitorUI.png" sourcerect="448,448,64,64" origin="0.5,0.5" />
        <SlotIcon slotindex="1" texture="Content/UI/StatusMonitorUI.png" sourcerect="448,448,64,64" origin="0.5,0.5" />
        <SlotIcon slotindex="2" texture="Content/UI/StatusMonitorUI.png" sourcerect="448,448,64,64" origin="0.5,0.5" />
        <SlotIcon slotindex="3" texture="Content/UI/StatusMonitorUI.png" sourcerect="448,448,64,64" origin="0.5,0.5" />
        <SlotIcon slotindex="4" texture="Content/UI/StatusMonitorUI.png" sourcerect="448,448,64,64" origin="0.5,0.5" />
        <SlotIcon slotindex="5" texture="Content/UI/StatusMonitorUI.png" sourcerect="448,448,64,64" origin="0.5,0.5" />
        <SlotIcon slotindex="6" texture="Content/UI/StatusMonitorUI.png" sourcerect="320,448,64,64" origin="0.5,0.5" />
        <SubContainer capacity="1" maxstacksize="1">
          <Containable items="flashlight" hide="false" itempos="38,0" setactive="true" />
        </SubContainer>
      </ItemContainer>
      <!-- Where proxy item is located. -->
      <ItemContainer capacity="1" maxstacksize="1" hideitems="true" drawinventory="false" spawnwithid="grenreloading" removecontaineditemsondeconstruct="true">
        <!-- RemoveContainedItemsOnDeconstruct removes proxy on deconstruction. -->&gt;
        <Containable items="grenreloading" hide="true" /></ItemContainer>
      <aitarget sightrange="500" soundrange="500" fadeouttime="3" />
      <Quality>
        <QualityStat stattype="ExplosionRadius" value="0.1" />
        <QualityStat stattype="ExplosionDamage" value="0.1" />
      </Quality>
      <Upgrade gameversion="0.10.0.0" scale="0.5" />
      <SkillRequirementHint identifier="weapons" level="60" />
    </Item>
    <!-- Proxy item. -->
    <Item name=" " identifier="grenreloading" maxstacksize="1" scale="0.5" category="Weapon" NonInteractable="True" hideinmenus="true" tags="smallitem,grenreloading">
      <InventoryIcon texture="%ModDir%/Ammunition.png" sourcerect="308,64,64,64" origin="0.5,0.5" />
      <Sprite texture="Content/Items/Weapons/weapons_new.png" sourcerect="195,282,17,6" depth="0.55" origin="0.5,0.5" />
      <Body width="5" height="5" density="25" />
      <Holdable canBeCombined="true" slots="Any,RightHand,LeftHand" handle1="0,0" msg="ItemMsgPickUpSelect" />
    </Item>
  </Items>
</Override>