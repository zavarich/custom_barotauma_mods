<?xml version="1.0" encoding="utf-8"?>
<Override>
  <Items>
    <Item name="" HideConditionBar="true" identifier="harpooncoilrifle" category="Weapon" cargocontaineridentifier="metalcrate" tags="mediumitem,weapon,gunsmith,provocativetohumanai,mountableweapon" Scale="0.5" impactsoundtag="impact_metal_light">
      <PreferredContainer secondary="wreckweaponholder" spawnprobability="0.005" />
      <PreferredContainer secondary="wreckarmcab,abandonedarmcab,piratearmcab" amount="1" spawnprobability="0.01" />
      <PreferredContainer primary="secarmcab" secondary="armcab,weaponholder" />
      <Price baseprice="270" minleveldifficulty="30">
        <Price storeidentifier="merchantoutpost" multiplier="1.5" />
        <Price storeidentifier="merchantcity" multiplier="1.25" minavailable="2" sold="false" />
        <Price storeidentifier="merchantresearch" multiplier="1.25" />
        <Price storeidentifier="merchantmilitary" multiplier="0.9" minavailable="3" />
        <Price storeidentifier="merchantmine" multiplier="1.25" />
        <Price storeidentifier="merchantarmory" multiplier="0.9" minavailable="3" />
      </Price>
      <Deconstruct time="10">
        <Item identifier="aluminium" />
        <Item identifier="plastic" />
        <Item identifier="copper" />
      </Deconstruct>
      <Fabricate suitablefabricators="fabricator" requiredtime="20" requiresrecipe="true">
        <RequiredSkill identifier="weapons" level="30" />
        <RequiredItem identifier="aluminium" amount="2" />
        <RequiredItem identifier="plastic" amount="2" />
        <RequiredItem identifier="copper" amount="2" />
      </Fabricate>
      <Sprite texture="Content/Items/Weapons/weapons_new.png" sourcerect="262,383,179,49" depth="0.55" origin="0.5,0.5" />
      <Body width="170" height="44" density="25" />
      <Holdable slots="Any,RightHand+LeftHand" controlpose="true" holdpos="35,-10" aimpos="45,-6" handle1="-20,-6" handle2="30,10" holdangle="-40" msg="ItemMsgPickUpSelect" />
      <RangedWeapon launchimpulse="30.0" maxchargetime="0.25" reload="1.5" weapondamagemodifier="1.25" spread="0.2" unskilledspread="5" combatPriority="70" drawhudwhenequipped="true" barrelpos="85,16" crosshairscale="0.2" holdtrigger="true">
        <!-- Crosshairs. -->
        <Crosshair texture="Content/Items/Weapons/Crosshairs.png" sourcerect="0,256,256,256" />
        <CrosshairPointer texture="Content/Items/Weapons/Crosshairs.png" sourcerect="256,256,256,256" />
        <!-- Particles. -->
        <!-- Visible only inside water. -->
        <ParticleEmitter particle="muzzlebubbles" particleamount="3" anglemin="30" anglemax="80" velocitymin="20" velocitymax="50" />
        <ParticleEmitter particle="gunbubbles" particleamount="12" anglemin="170" anglemax="180" velocitymin="10" velocitymax="20" distancemin="0" distancemax="80" />
        <!-- Harpoon fire sounds. -->
        <Sound file="Content/Items/Weapons/WEAPON_harpoonCoilRifleShot1.ogg" type="OnUse" range="2000" />
        <Sound file="Content/Items/Weapons/WEAPON_harpoonCoilRifleShot2.ogg" type="OnUse" range="2000" />
        <Sound file="Content/Items/Weapons/WEAPON_harpoonCoilRifleShot3.ogg" type="OnUse" range="2000" />
        <ChargeSound file="Content/Items/Weapons/WEAPON_harpoonCoilRifleChargeUp.ogg" range="500" />
        <!-- Unskilled high recoil. -->
        <StatusEffect type="OnUse" target="This" offset="0,-5">
          <Conditional targetcontainer="true" skillrequirement="true" weapons="lt 30" />
          <Explosion range="75.0" force="2" shockwave="false" smoke="false" flames="false" flash="false" sparks="false" underwaterbubble="false" camerashake="15.0" />
        </StatusEffect>
        <!-- Skilled low recoil. -->
        <StatusEffect type="OnUse" target="This" offset="0,-5">
          <Conditional targetcontainer="true" skillrequirement="true" weapons="gte 30" />
          <Explosion range="150.0" force="1" shockwave="false" smoke="false" flames="false" flash="false" sparks="false" underwaterbubble="false" camerashake="10.0" />
        </StatusEffect>
        <!-- OnBroken (when condition is set to 0 from OnInserted status effects in Containable intended for reloading animation),
      Proxy item's condition will be set to 0 and back to 100 after a delay. -->
        <StatusEffect type="OnBroken" target="Contained" targetidentifiers="coilreloading" delay="0.01" condition="0" setvalue="true" />
        <StatusEffect type="OnBroken" target="Contained" targetidentifiers="coilreloading" delay="0.9" condition="100" setvalue="true" />
        <!-- 12 usages with normal battery -->
        <StatusEffect type="OnUse" target="Contained" targetslot="1" Condition="-8.3" disabledeltatime="true">
          <RequiredItem items="mobilebattery" type="Contained" msg="ItemMsgBatteryCellRequired" />
        </StatusEffect>
        <!-- Fail safe if the players save and quit during the reloading or shooting. Sets the gun's values to default. -->
        <StatusEffect Type="Always" OneShot="True" target="Contained" targetidentifiers="coilreloading" condition="100" setvalue="true" />
        <StatusEffect Type="Always" OneShot="True" target="This" holdpos="35,-10" aimpos="45,-6" handle1="-20,-6" handle2="30,10" holdangle="-40" aimangle="0" condition="100" setvalue="true" />
        <StatusEffect type="Always" OneShot="True" targetitemcomponent="LightComponent" target="This" lightcolor="255,255,75,0" setvalue="true" />
        <StatusEffect type="Always" OneShot="True" targetitemcomponent="ItemContainer" target="This" AllowAccess="true" setvalue="true" />
        <StatusEffect type="Always" OneShot="True" target="This" hideitems="false" setvalue="true" />
        <!-- Launcher requires harpoon and battery to use. -->
        <RequiredItem items="mobilebattery" type="Contained" TargetSlot="1" msg="ItemMsgBatteryCellRequired" />
        <RequiredItems items="harpoonammo" type="Contained" msg="ItemMsgSpearRequired" />
        <!-- Gun requires proxy item to use. During the reloading, the proxy item's condition is set to 0, preventing the item from firing. -->
        <RequiredItems items="coilreloading" type="Contained" />
        <RequiredSkill identifier="weapons" level="30" />
      </RangedWeapon>
      <ItemContainer capacity="1" maxstacksize="1" slotsperrow="2" hideitems="false" itempos="27,15" containedstateindicatorstyle="spear" containedstateindicatorslot="0" containedspritedepth="0.56">
        <Containable items="harpoonammo" hide="false">
          <!-- Hides the slots, preventing the person from adding more or removing. -->
          <StatusEffect type="OnInserted" target="This" AllowAccess="false" delay="0.01" setvalue="true" />
          <!-- Unhides the slots, allowing the person from adding more or removing. -->
          <StatusEffect type="OnInserted" target="This" AllowAccess="true" delay="0.9" setvalue="true" />
          <!-- Makes the harpoon invisible. -->
          <StatusEffect type="OnInserted" target="This" hideitems="true" delay="0.01" condition="0" setvalue="true" stackable="false" />
          <!-- Sets the gun's and hand's position. -->
          <StatusEffect type="OnInserted" target="This" holdpos="15,-40" aimpos="25,-30" handle2="80,25" holdangle="40" aimangle="40" delay="0.01" setvalue="true" stackable="false" />
          <!-- Sound. -->
          <StatusEffect type="OnInserted" target="This" delay="0.3" forceplaysounds="true" stackable="false">
            <Sound file="%ModDir%/HarpoonGun/HarpoonGunHarpoonLoad.ogg" type="OnUse" range="1000" />
          </StatusEffect>
          <!-- Sets the hand's position to insert the harpoon. -->
          <StatusEffect type="OnInserted" target="This" holdpos="20,-40" aimpos="30,-30" handle2="0,25" holdangle="30" aimangle="30" delay="0.4" setvalue="true" stackable="false" />
          <!-- Makes the harpoon visible. -->
          <StatusEffect type="OnInserted" target="This" hideitems="false" delay="0.5" setvalue="true" stackable="false">
            <ParticleEmitter particle="gunbubbles" particleamount="12" anglemin="180" anglemax="200" velocitymin="10" velocitymax="20" distancemin="-40" distancemax="40" />
          </StatusEffect>
          <!-- Sets everything to default. -->
          <StatusEffect type="OnInserted" target="This" holdpos="35,-10" aimpos="45,-6" handle1="-20,-6" handle2="30,10" holdangle="-40" aimangle="0" condition="100" delay="0.8" setvalue="true" stackable="false" />
        </Containable>
        <SlotIcon slotindex="0" texture="Content/UI/StatusMonitorUI.png" sourcerect="0,448,64,64" origin="0.5,0.5" />
        <SlotIcon slotindex="1" texture="Content/UI/StatusMonitorUI.png" sourcerect="128,448,64,64" origin="0.5,0.5" />
        <SlotIcon slotindex="2" texture="Content/UI/StatusMonitorUI.png" sourcerect="320,448,64,64" origin="0.5,0.5" />
        <SubContainer capacity="1" maxstacksize="1">
          <Containable items="mobilebattery" hide="true" excludebroken="false">
            <!-- Plays the sound if the battery is removed. -->
            <StatusEffect type="OnInserted" target="This" delay="0.01" forceplaysounds="true">
              <Sound file="%ModDir%/HarpoonCoilRifle/BatteryUnload.ogg" type="OnUse" range="1000" />
            </StatusEffect>
            <!-- Sets the hand's position to insert the battery. -->
            <StatusEffect type="OnInserted" target="This" holdpos="30,-20" aimpos="30,-30" handle2="-30,15" holdangle="-30" aimangle="-30" delay="0.01" setvalue="true" />
            <!-- Sound. -->
            <StatusEffect type="OnInserted" target="This" delay="0.4" forceplaysounds="true">
              <Sound file="%ModDir%/HarpoonCoilRifle/BatteryLoad.ogg" type="OnUse" range="1000" />
            </StatusEffect>
            <!-- Insertion. -->
            <StatusEffect type="OnInserted" target="This" handle2="-30,0" delay="0.5" setvalue="true" />
            <!-- Sets everything to default. -->
            <StatusEffect type="OnInserted" target="This" holdpos="35,-10" aimpos="45,-6" handle1="-20,-6" handle2="30,10" holdangle="-40" aimangle="0" condition="100" delay="1.2" setvalue="true" stackable="false" />
          </Containable>
        </SubContainer>
        <SubContainer capacity="1" maxstacksize="1">
          <Containable items="flashlight" hide="false" itempos="27,4" setactive="true" />
          <Containable items="scope" hide="false" itempos="8,15">
            <StatusEffect type="OnContaining" target="This" cameraaimoffset="500" setvalue="true" interval="1" />
            <StatusEffect type="OnRemoved" target="This" cameraaimoffset="0" setvalue="true" />
          </Containable>
        </SubContainer>
      </ItemContainer>
      <!-- Where reloading proxy item is located. -->
      <ItemContainer capacity="1" maxstacksize="1" hideitems="true" drawinventory="false" spawnwithid="coilreloading" removecontaineditemsondeconstruct="true">
        <!-- RemoveContainedItemsOnDeconstruct removes proxy on deconstruction. -->&gt;
        <Containable items="coilreloading" hide="true" /></ItemContainer>
      <aitarget sightrange="0" soundrange="500" fadeouttime="2" />
      <Quality>
        <QualityStat stattype="FirepowerMultiplier" value="0.1" />
      </Quality>
      <SkillRequirementHint identifier="weapons" level="30" />
    </Item>
    <!-- Proxy item. -->
    <Item name=" " identifier="coilreloading" maxstacksize="1" scale="0.5" category="Weapon" NonInteractable="True" hideinmenus="true" tags="smallitem,coilreloading">
      <InventoryIcon texture="%ModDir%/Ammunition.png" sourcerect="308,64,64,64" origin="0.5,0.5" />
      <Sprite texture="Content/Items/Weapons/weapons_new.png" sourcerect="195,282,17,6" depth="0.55" origin="0.5,0.5" />
      <Body width="5" height="5" density="25" />
      <Holdable canBeCombined="true" slots="Any,RightHand,LeftHand" handle1="0,0" msg="ItemMsgPickUpSelect" />
    </Item>
  </Items>
</Override>