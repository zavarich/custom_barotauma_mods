<?xml version="1.0" encoding="utf-8"?>
<Override>
  <Items>
    <Item name="" HideConditionBar="true" identifier="flamer" category="Equipment" Tags="smallitem,weapon,gun,mountableweapon" cargocontaineridentifier="metalcrate" Scale="0.5" impactsoundtag="impact_metal_light">
      <Upgrade gameversion="0.10.0.0" scale="0.5" />
      <PreferredContainer primary="secarmcab" amount="1" spawnprobability="0.2" notcampaign="true" notpvp="true" />
      <PreferredContainer secondary="wrecksecarmcab,abandonedsecarmcab,piratesecarmcab" amount="1" spawnprobability="0.1" />
      <PreferredContainer secondary="armcab,weaponholder" />
      <Price baseprice="105" sold="false">
        <Price storeidentifier="merchantoutpost" />
        <Price storeidentifier="merchantcity" multiplier="0.9" />
        <Price storeidentifier="merchantresearch" multiplier="1.25" />
        <Price storeidentifier="merchantmilitary" sold="true" multiplier="1.25" minavailable="1" />
        <Price storeidentifier="merchantmine" />
        <Price storeidentifier="merchantarmory" multiplier="1.25" minavailable="1" />
      </Price>
      <InventoryIcon texture="Content/Items/InventoryIconAtlas.png" sourcerect="320,64,64,64" />
      <Sprite texture="%ModDir%/Flamer/Flamer.png" sourcerect="0,0,144,74" depth="0.55" origin="0.5,0.5" />
      <Deconstruct time="10">
        <Item identifier="steel" />
        <Item identifier="rubber" />
      </Deconstruct>
      <Fabricate suitablefabricators="fabricator" requiredtime="20" requiresrecipe="true">
        <RequiredSkill identifier="mechanical" level="30" />
        <RequiredSkill identifier="weapons" level="20" />
        <RequiredItem identifier="steel" amount="2" />
        <RequiredItem identifier="rubber" amount="2" />
      </Fabricate>
      <Body width="150" height="77" density="25" />
      <Holdable slots="Any,RightHand+LeftHand" controlpose="true" holdpos="50,-30" holdangle="-30" aimpos="50,-10" handle1="-62,-16" handle2="-11,-6" msg="ItemMsgPickUpSelect" />
      <RepairTool firedamage="25.0" structurefixamount="0.0" usablein="Air" range="500" barrelpos="35,15" fireprobability="0.1" repairmultiple="true" RepairMultipleWalls="false" repairthroughwalls="false" repairthroughholes="true" combatpriority="50" spread="25" unskilledspread="25">
        <!-- Fail safe if the players save and quit during the reloading or shooting. Sets the gun's values to default. -->
        <StatusEffect Type="Always" OneShot="True" target="Contained" targetidentifiers="flamreloading" condition="100" setvalue="true" />
        <StatusEffect Type="Always" OneShot="True" target="This" holdpos="50,-30" holdangle="-30" aimpos="50,-10" handle1="-62,-16" handle2="-11,-6" aimangle="0" condition="100" setvalue="true" />
        <StatusEffect type="Always" OneShot="True" targetitemcomponent="LightComponent" target="This" lightcolor="255,255,75,0" setvalue="true" />
        <StatusEffect type="Always" OneShot="True" targetitemcomponent="ItemContainer" target="This" AllowAccess="true" setvalue="true" />
        <StatusEffect type="Always" OneShot="True" target="This" hideitems="false" setvalue="true" />
        <!-- the item must contain a welding fuel tank for it to work -->
        <RequiredItems items="weldingtoolfuel,oxygensource" type="Contained" msg="ItemMsgWeldingFuelRequired" />
        <RequiredSkill identifier="weapons" level="50" />
        <ParticleEmitterHitCharacter particle="fleshsmoke" particlespersecond="3" anglemin="265" anglemax="275" velocitymin="0" velocitymax="50" />
        <ParticleEmitter particle="flamethrower" particlespersecond="80" anglemin="0" anglemax="0" velocitymin="1000" velocitymax="1500" highqualitycollisiondetection="true" />
        <ParticleEmitter particle="flamethrowersmoke" particlespersecond="80" anglemin="0" anglemax="0" velocitymin="500" velocitymax="1000" />
        <sound file="Content/Items/Weapons/FlameThrowerLoop.ogg" type="OnUse" range="750.0" loop="true" />
        <StatusEffect type="OnSuccess" targettype="UseTarget" targets="item" Condition="-15.0">
          <Conditional HasTag="neq weldable" />
        </StatusEffect>
        <!-- make the item unusable when there's less than 10% oxygen -->
        <StatusEffect type="OnUse" target="Hull,This" UsableIn="None">
          <Conditional OxygenPercentage="lt 10" />
        </StatusEffect>
        <!-- make the item usable again when there's more than 10% oxygen -->
        <StatusEffect type="OnUse" target="Hull,This" UsableIn="Air">
          <Conditional OxygenPercentage="gt 10" />
        </StatusEffect>
        <!-- when using, the contained welding fuel tank will detoriate (= lose fuel) -->
        <StatusEffect type="OnUse" targettype="Contained" targets="weldingfueltank" Condition="-25.0" />
        <StatusEffect type="OnUse" targettype="Contained" targets="incendiumfueltank" Condition="-10.0" />
        <!-- do burn damage to characters -->
        <StatusEffect type="OnUse" target="UseTarget">
          <Conditional InWater="false" />
          <Affliction identifier="burn" amount="1.25" />
          <Affliction identifier="burning" amount="2" dividebylimbcount="true" />
        </StatusEffect>
        <StatusEffect type="OnUse" target="UseTarget">
          <RequiredItem items="incendiumfueltank" type="Contained" />
          <Conditional InWater="false" />
          <Affliction identifier="burn" amount="2.5" />
          <Affliction identifier="burning" amount="2" dividebylimbcount="true" />
          <Affliction identifier="stun" strength="1" probability="0.1" />
        </StatusEffect>
        <StatusEffect type="OnUse" target="This" firedamage="40.0" fireprobability="0.35" setvalue="true">
          <RequiredItem items="incendiumfueltank" type="Contained" />
        </StatusEffect>
        <!-- explode if oxygen tanks are inserted -->
        <StatusEffect type="OnUse" targettype="Contained" targets="oxygentank" delay="1.0" stackable="false" Condition="0" setvalue="true">
          <sound file="Content/Items/Weapons/ExplosionSmall1.ogg" range="2000" />
          <sound file="Content/Items/Weapons/ExplosionSmall2.ogg" range="2000" />
          <sound file="Content/Items/Weapons/ExplosionSmall3.ogg" range="2000" />
          <Explosion range="150.0" force="3" applyfireeffects="false">
            <Affliction identifier="burn" strength="25" />
            <Affliction identifier="stun" strength="5" />
          </Explosion>
        </StatusEffect>
        <StatusEffect type="OnUse" targettype="Contained" targets="oxygenitetank" delay="1.0" stackable="false" Condition="0" setvalue="true">
          <sound file="Content/Items/Weapons/ExplosionSmall1.ogg" range="2000" />
          <sound file="Content/Items/Weapons/ExplosionSmall2.ogg" range="2000" />
          <sound file="Content/Items/Weapons/ExplosionSmall3.ogg" range="2000" />
          <Explosion range="150.0" force="6" applyfireeffects="false">
            <Affliction identifier="burn" strength="50" />
            <Affliction identifier="stun" strength="10" />
          </Explosion>
        </StatusEffect>
        <!-- consume oxygen from the hull -->
        <StatusEffect type="OnUse" target="Hull" Oxygen="-10000" />
        <!-- Self-damage on fail -->
        <StatusEffect type="OnFailure" target="Character" targetlimbs="LeftHand,RightHand">
          <Conditional InWater="false" />
          <Affliction identifier="burn" strength="7.5" probability="0.5" />
        </StatusEffect>
        <StatusEffect type="OnFailure" target="Character" targetlimbs="LeftHand,RightHand">
          <RequiredItem items="incendiumfueltank" type="Contained" />
          <Conditional InWater="false" />
          <Affliction identifier="burn" strength="5.0" probability="0.5" />
        </StatusEffect>
        <!-- Gun's muzzle which works like a light component. -->
        <LightComponent range="38.0" lightcolor="255,174,121,255" Flicker="0.8" FlickerSpeed="0.6">
          <LightTexture texture="%ModDir%/Flamer/FlamerMuzzle.png" origin="0.5,0.5" size="1.0,1.0" />
        </LightComponent>
        <!-- OnBroken (when condition is set to 0 from OnInserted status effects in Containable intended for reloading animation),
      Proxy item's condition will be set to 0 and back to 100 after a delay. -->
        <StatusEffect type="OnBroken" target="Contained" targetidentifiers="flamreloading" delay="0.01" condition="0" setvalue="true" />
        <StatusEffect type="OnBroken" target="Contained" targetidentifiers="flamreloading" delay="2.6" condition="100" setvalue="true" />
        <!-- Flamer requires proxy item to use. During the reloading, the proxy item's condition is set to 0, preventing the item from firing. -->
        <RequiredItems items="flamreloading" type="Contained" />
        <!-- Requires welding fuel. -->
        <RequiredItems items="weldingtoolfuel,oxygensource" type="Contained" />
      </RepairTool>
      <!-- one welding fuel or oxygen tank can be contained inside the welding tool -->
      <ItemContainer capacity="1" maxstacksize="1" hideitems="false" itempos="10,-22" containedspritedepth="0.56" containedstateindicatorstyle="tank">
        <SlotIcon slotindex="0" texture="Content/UI/StatusMonitorUI.png" sourcerect="64,448,64,64" origin="0.5,0.5" />
        <Containable items="weldingtoolfuel,oxygensource" excludebroken="false">
          <!-- Hides the slots, preventing the person from adding more or removing. -->
          <StatusEffect type="OnInserted" target="This" AllowAccess="false" delay="0.01" setvalue="true" />
          <!-- Unhides the slots, allowing the person from adding more or removing. -->
          <StatusEffect type="OnInserted" target="This" AllowAccess="true" delay="2.0" setvalue="true" />
          <!-- Plays the sound of the can is removed. -->
          <StatusEffect type="OnRemoved" target="This" delay="0.01" forceplaysounds="true" stackable="false">
            <Sound file="%ModDir%/Flamer/FlamerUnload.ogg" type="OnUse" volume="3" range="1000" />
          </StatusEffect>
          <!-- Makes the fuel can invisible. -->
          <StatusEffect type="OnInserted" target="This" hideitems="true" handle2="8,-6" aimangle="10" holdangle="10" holdpos="30,-20" condition="0" delay="0.01" setvalue="true" stackable="false" />
          <!-- Sound and hand animation. -->
          <StatusEffect type="OnInserted" target="This" delay="0.9" handle2="8,-30" setvalue="true" forceplaysounds="true" stackable="false">
            <Sound file="%ModDir%/Flamer/FlamerLoad.ogg" type="OnUse" volume="3" range="1000" />
          </StatusEffect>
          <!-- Hand animation. -->
          <StatusEffect type="OnInserted" target="This" delay="1.2" handle2="8,-11" stackable="false" />
          <!-- Makes the fuel can visible. -->
          <StatusEffect type="OnInserted" target="This" hideitems="false" delay="1.3" aimangle="20" holdangle="20" setvalue="true" stackable="false">
            <ParticleEmitter particle="gunbubbles" particleamount="3" anglemin="330" anglemax="330" velocitymin="20" velocitymax="50" distancemin="3" distancemax="5" />
          </StatusEffect>
          <!-- Last animation stage. -->
          <StatusEffect type="OnInserted" target="This" delay="2" holdpos="50,-30" holdangle="-30" aimpos="50,-10" aimangle="0" handle1="-62,-16" handle2="-11,-6" condition="100" setvalue="true" />
        </Containable>
      </ItemContainer>
      <!-- Where proxy item is located. -->
      <ItemContainer capacity="1" maxstacksize="1" hideitems="true" drawinventory="false" spawnwithid="flamreloading" removecontaineditemsondeconstruct="true">
        <!-- RemoveContainedItemsOnDeconstruct removes proxy on deconstruction. -->&gt;
        <Containable items="flamreloading" hide="true" /></ItemContainer>
      <aitarget sightrange="5000" soundrange="500" fadeouttime="5" />
      <SkillRequirementHint identifier="weapons" level="50" />
    </Item>
    <!-- Proxy item. -->
    <Item name=" " identifier="flamreloading" maxstacksize="1" scale="0.5" category="Weapon" NonInteractable="True" hideinmenus="true" tags="smallitem,flamreloading">
      <InventoryIcon texture="%ModDir%/Ammunition.png" sourcerect="308,64,64,64" origin="0.5,0.5" />
      <Sprite texture="Content/Items/Weapons/weapons_new.png" sourcerect="195,282,17,6" depth="0.55" origin="0.5,0.5" />
      <Body width="5" height="5" density="25" />
      <Holdable canBeCombined="true" slots="Any,RightHand,LeftHand" handle1="0,0" msg="ItemMsgPickUpSelect" />
    </Item>
  </Items>
</Override>